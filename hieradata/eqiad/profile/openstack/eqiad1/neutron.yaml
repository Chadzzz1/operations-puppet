profile::openstack::eqiad1::neutron::base_interface: 'eno50'
profile::openstack::eqiad1::neutron::bind_port: 19696
profile::openstack::eqiad1::neutron::db_host: openstack.eqiad1.wikimediacloud.org
profile::openstack::eqiad1::neutron::network_flat_interface_vlan: '1105'
profile::openstack::eqiad1::neutron::network_flat_interface_vlan_external: '1120'
profile::openstack::eqiad1::neutron::rabbit_user: 'neutron'
profile::openstack::eqiad1::neutron::network_flat_name: 'cloudinstances2b'
# T193496
profile::openstack::eqiad1::neutron::network_public_ip: '185.15.56.1'
profile::openstack::eqiad1::neutron::dmz_cidr:
 - 172.16.0.0/21:91.198.174.0/24
 - 172.16.0.0/21:198.35.26.0/23
 - 172.16.0.0/21:208.80.152.0/22
 - 172.16.0.0/21:103.102.166.0/24
 # the following should match what's in homer/public.git cloud-in4 filter
 # there is no other access (NAT or not) to other 10.x.x.x services anyway
 # VMs --> nfs-tools-project.svc.eqiad.wmnet
 - 172.16.0.0/21:10.64.37.18/32
 # VMs --> wiki replicas (dbproxy1019 & dbproxy1018)
 - 172.16.0.0/21:10.64.37.28/32
 - 172.16.0.0/21:10.64.37.27/32
 # VMs --> cloudmetrics1001 / cloudmetrics1002
 - 172.16.0.0/21:10.64.37.13/32
 - 172.16.0.0/21:10.64.4.15/32
 # VMs --> relforge1001 / relforge1002
 - 172.16.0.0/21:10.64.4.13/32
 - 172.16.0.0/21:10.64.37.21/32
profile::openstack::eqiad1::neutron::l3_agent_bridges:
  br-external:
    addif: 'eno50.1120'
  br-internal:
    addif: 'eno50.1105'
profile::openstack::eqiad1::neutron::l3_agent_bridge_mappings:
  br-external: 'br-external'
  cloudinstances2b: 'br-internal'
profile::openstack::eqiad1::neutron::report_interval: '5'
profile::openstack::eqiad1::neutron::agent_down_time: '64'
profile::openstack::eqiad1::neutron::log_agent_heartbeats: 'True'

# Meet the conntrackd hack configuration. This should be included in upstream neutron-l3-agent
# instead... But for some reason the work hasn't been done. The values here are auto-generated by
# neutron, so they can change anytime, but hopefully, they don't change often enough, and this hack
# would just work. See T268335 for context.
profile::openstack::eqiad1::neutron::l3_conntrackd:
  cloudnet1003:
    netns: 'qrouter-d93771ba-2711-4f88-804a-8df6fd03978a'
    nic: 'ha-37a86ebc-17'
    local_addr: '169.254.192.9'
    remote_addr: '169.254.192.6'
    filter_ipv4:
      # don't sync ct info for the following local addresses
      - 169.254.0.1
      - 169.254.192.9
      - 169.254.192.6
      - 172.16.0.1
      - 185.15.56.10
  cloudnet1004:
    netns: 'qrouter-d93771ba-2711-4f88-804a-8df6fd03978a'
    nic: 'ha-d8c86248-12'
    local_addr: '169.254.192.6'
    remote_addr: '169.254.192.9'
    filter_ipv4:
      # don't sync ct info for the following local addresses
      - 169.254.0.1
      - 169.254.192.9
      - 169.254.192.6
      - 172.16.128.1
      - 185.15.56.10
