admin::groups:
  - restricted
  - deployment
  - ldap-admins
  - maintenance-log-readers
  - perf-roots
profile::base::domain_search:
  - wikimedia.org
  - eqiad.wmnet
  - codfw.wmnet
mediawiki::hhvm::extra_cli:
  hhvm:
    server:
      # Limit number of child processes running at once
      # Also, use light processes, that are more efficient
      light_process_count: 2
    mysql:
      # Kill queries only after 1 day
      read_timeout: 86400000
nutcracker::verbosity: "4"
profile::mariadb::maintenance::ensure: present

# whitelist maintenance servers from screen monitoring
# many users have permanent sessions here (T165348)
monitor_screens: false

# by default, the account consistency check is turned off
profile::openldap::management::cron_active: false

# We don't need php-fpm here
profile::mediawiki::php::enable_fpm: false
profile::mediawiki::php::php_version: "7.2"
profile::mediawiki::apc_shm_size: 128M
diamond::remove: true

# maintenance servers need conftool state to determine the
# active data center and decide whether periodic jobs should run
profile::conftool::state::ensure: present
profile::conftool::state::query_interval: 30
profile::mediawiki::apc_shm_size: 128M
