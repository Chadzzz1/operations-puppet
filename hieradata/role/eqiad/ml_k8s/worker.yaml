profile::calico::kubernetes::bgp_peers:
- ml-serve1001.eqiad.wmnet
- ml-serve1002.eqiad.wmnet
- ml-serve1003.eqiad.wmnet
- ml-serve1004.eqiad.wmnet
- ml-serve-ctrl1001.eqiad.wmnet
- ml-serve-ctrl1002.eqiad.wmnet
- cr1-eqiad.wikimedia.org
- cr2-eqiad.wikimedia.org
profile::kubernetes::node::kubelet_cluster_dns: "10.64.77.3"
profile::kubernetes::master_hosts:
- ml-serve-ctrl1001.eqiad.wmnet
- ml-serve-ctrl1002.eqiad.wmnet

# Settings for T297612
profile::calico::kubernetes::cni_config:
  name: "k8s-pod-network"
  cniVersion: "0.3.1"
  plugins:
  - type: "calico"
    log_level: "info"
    datastore_type: "kubernetes"
    mtu: 1500
    ipam:
      type: "calico-ipam"
      assign_ipv4: "true"
      assign_ipv6: "true"
    policy:
      type: "k8s"
    kubernetes:
      kubeconfig: "/etc/cni/net.d/calico-kubeconfig"
  - name: "istio-cni"
    type: "istio-cni"
    log_level: "info"
    kubernetes:
      kubeconfig: "/etc/cni/net.d/istio-kubeconfig"
      cni_bin_dir: "/opt/cni/bin"
      exclude_namespaces:
      - istio-system
      - kube-system
      - knative-serving
      - cert-manager
      - kserve
