profile::openstack::codfw1dev::neutron::enable_hacks: false
profile::openstack::codfw1dev::neutron::db_host: openstack.codfw1dev.wikimediacloud.org
profile::openstack::codfw1dev::neutron::base_interface: 'eno2'
profile::openstack::codfw1dev::neutron::network_flat_interface_vlan: '2105'
profile::openstack::codfw1dev::neutron::network_flat_interface_vlan_external: '2107'
profile::openstack::codfw1dev::neutron::rabbit_user: 'neutron'
profile::openstack::codfw1dev::neutron::network_flat_name: 'cloudinstances2b'
profile::openstack::codfw1dev::neutron::network_public_ip: '185.15.57.1'
profile::openstack::codfw1dev::neutron::dmz_cidr:
 - 172.16.128.0/24:208.80.155.0/22
 # the following should match what's in homer/public.git cloud-in4 filter
 # there is no other access (NAT or not) to other 10.x.x.x services anyway
 # VMs --> nfs-tools-project.svc.eqiad.wmnet
 - 172.16.128.0/24:10.64.37.18/32
 # VMs --> wiki replicas (dbproxy1019 & dbproxy1018)
 - 172.16.128.0/24:10.64.37.28/32
 - 172.16.128.0/24:10.64.37.27/32
 # VMs --> cloudmetrics1001 / cloudmetrics1002
 - 172.16.128.0/24:10.64.37.13/32
 - 172.16.128.0/24:10.64.4.15/32
 # VMs --> relforge1001 / relforge1002
 - 172.16.128.0/24:10.64.4.13/32
 - 172.16.128.0/24:10.64.37.21/32

profile::openstack::codfw1dev::neutron::l3_agent_bridges:
  br-external:
    addif: 'eno2.2107'
  br-internal:
    addif: 'eno2.2105'
profile::openstack::codfw1dev::neutron::l3_agent_bridge_mappings:
  br-external: 'br-external'
  cloudinstances2b: 'br-internal'
profile::openstack::codfw1dev::neutron::report_interval: '30'
profile::openstack::codfw1dev::neutron::agent_down_time: '64'
profile::openstack::codfw1dev::neutron::log_agent_heartbeats: 'True'
profile::openstack::codfw1dev::neutron::bind_port: 19696

# Meet the conntrackd hack configuration. This should be included in upstream neutron-l3-agent
# instead... But for some reason the work hasn't been done. The values here are auto-generated by
# neutron, so they can change anytime, but hopefully, they don't change often enough, and this hack
# would just work. See T268335 for context.
profile::openstack::codfw1dev::neutron::l3_conntrackd:
  cloudnet2003-dev:
    netns: 'qrouter-5712e22e-134a-40d3-a75a-1c9b441717ad'
    nic: 'ha-727a378d-35'
    addr: 169.254.192.5
  cloudnet2002-dev:
    netns: 'qrouter-5712e22e-134a-40d3-a75a-1c9b441717ad'
    nic: 'ha-5dc9c3b7-24'
    addr: 169.254.192.4
