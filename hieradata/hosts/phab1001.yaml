# this provides the listen_address for sshd_config, used for admin logins
# all other IPs are used by phabricator::vcs (aka git-ssh.wikimedia.org)
profile::ssh::server::listen_addresses: ["10.64.16.8"]

# phabricator's git backend uses a separate sshd with separate IPs on both
# the public and private networks.
# This is used in modules/phabricator/templates/sshd_config.phabricator.err
profile::phabricator::main::use_lvs: true
phabricator::vcs::listen_addresses:
  - "208.80.154.250"
  - "10.64.16.100"
  - "[2620:0:861:ed1a::3:16]"
  - "[2620:0:861:102:10:64:16:100]"

# enable git-ssh.wikimedia.org, default absent on new hosts
phabricator::vcs::enable: true
phabricator::vcs::ssh_phab_service_ensure: present

# TODO: don't repeat yourself here
profile::phabricator::main::vcs_addresses:
  - "208.80.154.250"
  - "10.64.16.100"
  - "[2620:0:861:ed1a::3:16]"
  - "[2620:0:861:102:10:64:16:100]"

phabricator::vcs::address::v4: "10.64.16.100"
phabricator::vcs::address::v6: "2620:0:861:102:10:64:16:100"

phabricator_logmail: true
profile::phabricator::main::phd_service_ensure: running

profile::phabricator::main::dump_enabled: true
