# https://github.com/prymitive/karma/blob/master/docs/CONFIGURATION.md
alertmanager:
  servers:
    - name: "<%= @facts['domain']  %>"
      uri: "http://localhost:9093"
      proxy: true

<% if @auth_header %>
# Auto-fill silence dialog with the authenticated user
authentication:
  header:
    name: <%= @auth_header %>
    value_re: ^(.+)$
<% end %>

# Match Icinga colors for 'severity' label
labels:
  color:
    custom:
      severity:
        - value: 'critical'
          color: '#ff3300'
        - value: 'warning'
          color: '#ffa500'
        - value: 'unknown'
          color: '#E066FF'

# Sort by decreasing severity (Icinga compat)
grid:
  sorting:
    order: label
    reverse: false
    label: severity
    customValues:
      labels:
        severity:
          critical: 1
          warning: 2
          unknown: 3

# Start with 'description' label collapsed
annotations:
  hidden:
    - description

filters:
  default:
    - "@state=active"

karma:
  name: "Alerts for <%= @facts['domain'] %>"
