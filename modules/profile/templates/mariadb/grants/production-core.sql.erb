-- wikiadmin 10.%

GRANT PROCESS, REPLICATION CLIENT
    ON *.* TO 'wikiadmin'@'10.%'
    IDENTIFIED BY '<%= @wikiadmin_pass %>';

GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER
    ON `%wik%`.* TO 'wikiadmin'@'10.%';

<% if @shard == 's7' %>
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER
    ON `centralauth`.* TO 'wikiadmin'@'10.%';
<% end -%>
<% if @shard == 'x2' %>
GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER
    ON `mainstash`.* TO 'wikiadmin'@'10.%';
<% end -%>

GRANT SELECT
    ON `heartbeat`.`heartbeat` TO 'wikiadmin'@'10.%';

GRANT SELECT, EXECUTE
    ON `sys`.* TO 'wikiadmin'@'10.%';

GRANT SELECT
    ON `performance_schema`.* TO 'wikiadmin'@'10.%';

-- wikiuser 10.64.%

GRANT PROCESS, REPLICATION CLIENT
    ON *.* TO '<%= @wikiuser_username %>'@'10.64.%'
    IDENTIFIED BY '<%= @wikiuser_pass %>';

GRANT SELECT, INSERT, UPDATE, DELETE
    ON `%wik%`.* TO '<%= @wikiuser_username %>'@'10.64.%';

<% if @shard == 's7' %>
GRANT SELECT, INSERT, UPDATE, DELETE
    ON `centralauth`.* TO '<%= @wikiuser_username %>'@'10.64.%';
<% end -%>
<% if @shard == 'x2' %>
GRANT SELECT, INSERT, UPDATE, DELETE
    ON `mainstash`.* TO '<%= @wikiuser_username %>'@'10.64.%';
<% end -%>

GRANT SELECT
    ON `heartbeat`.`heartbeat` TO '<%= @wikiuser_username %>'@'10.64.%';

-- wikiuser 10.192.%

GRANT PROCESS, REPLICATION CLIENT
    ON *.* TO '<%= @wikiuser_username %>'@'10.192.%'
    IDENTIFIED BY '<%= @wikiuser_pass %>';

GRANT SELECT, INSERT, UPDATE, DELETE
    ON `%wik%`.* TO '<%= @wikiuser_username %>'@'10.192.%';

<% if @shard == 's7' %>
GRANT SELECT, INSERT, UPDATE, DELETE
    ON `centralauth`.* TO '<%= @wikiuser_username %>'@'10.192.%';
<% end -%>
<% if @shard == 'x2' %>
GRANT SELECT, INSERT, UPDATE, DELETE
    ON `mainstash`.* TO '<%= @wikiuser_username %>'@'10.192.%';
<% end -%>

GRANT SELECT
    ON `heartbeat`.`heartbeat` TO '<%= @wikiuser_username %>'@'10.192.%';

<%- if @shard == 's6' -%>
-- wikiadmin @ 208.80.154.150 (cloudweb1003)
GRANT PROCESS, REPLICATION CLIENT
    ON *.* TO 'wikiadmin'@'208.80.154.150'
    IDENTIFIED BY '<%= @wikiadmin_pass %>';

GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER
    ON `labswiki`.* TO 'wikiadmin'@'208.80.154.150';

GRANT SELECT
    ON `heartbeat`.`heartbeat` TO 'wikiadmin'@'208.80.154.150';

-- wikiuser @ 208.80.154.150 (cloudweb1003)
GRANT PROCESS, REPLICATION CLIENT
    ON *.* TO '<%= @wikiuser_username %>'@'208.80.154.150'
    IDENTIFIED BY '<%= @wikiuser_pass %>';

GRANT SELECT, INSERT, UPDATE, DELETE
    ON `labswiki`.* TO '<%= @wikiuser_username %>'@'208.80.154.150';

GRANT SELECT
    ON `heartbeat`.`heartbeat` TO '<%= @wikiuser_username %>'@'208.80.154.150';

-- wikiuser @ 208.80.155.117 (cloudweb1004)
GRANT PROCESS, REPLICATION CLIENT
    ON *.* TO '<%= @wikiuser_username %>'@'208.80.155.117'
    IDENTIFIED BY '<%= @wikiuser_pass %>';

GRANT SELECT, INSERT, UPDATE, DELETE
    ON `labswiki`.* TO '<%= @wikiuser_username %>'@'208.80.155.117';

GRANT SELECT
    ON `heartbeat`.`heartbeat` TO '<%= @wikiuser_username %>'@'208.80.155.117';

-- wikiadmin @ 208.80.155.117 (cloudweb1004)
GRANT PROCESS, REPLICATION CLIENT
    ON *.* TO 'wikiadmin'@'208.80.155.117'
    IDENTIFIED BY '<%= @wikiadmin_pass %>';

GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, REFERENCES, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, EVENT, TRIGGER
    ON `labswiki`.* TO 'wikiadmin'@'208.80.155.117';

GRANT SELECT
    ON `heartbeat`.`heartbeat` TO 'wikiadmin'@'208.80.155.117';
<%- end -%>

